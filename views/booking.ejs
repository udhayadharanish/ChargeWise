<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enter the details</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
     <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>
</head>

<body>
    <div class="info" id="info">
        <p>
           
        </p>
    </div>
    <form class="container booking" id="myForm" method="post">
        <div id="carouselExample" class="carousel slide">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <h3 style="text-align: center;">Station details </h3>
                    <div class="station-details-big">
                       
                        <h2 class="mt-5 mb3"><%= data.name %> </h2>
                        <h4><%= data.rating %> ‚≠ê </h4>
                        <p><%= data.address %></p>
                        <div class="station-map" id="map">
                            
                        </div>
                        
                        <br><br>
                        <div class="station-images">
                            <img src="/static/Images/Default_ev_charging_car_for_website_with_desktop_resolution_0 (1).jpg" alt="" height="200" width="400">
                            <img src="/static/Images/Default_ev_charging_car_for_website_with_desktop_resolution_0 (1).jpg" alt="" height="200" width="400">
                            <img src="/static/Images/Default_ev_charging_car_for_website_with_desktop_resolution_0 (1).jpg" alt="" height="200" width="400">
                            <img src="/static/Images/Default_ev_charging_car_for_website_with_desktop_resolution_0 (1).jpg" alt="" height="200" width="400">
                            <img src="/static/Images/Default_ev_charging_car_for_website_with_desktop_resolution_0 (1).jpg" alt="" height="200" width="400">
                        </div>
                    </div>
                </div>
              <div class="carousel-item ">
                <div class="fix" >
                    <h3 style="text-align: center;">Choose your car model (1 / 3) </h3>
                    <div class="search mb-3">
                        
                        <img src="/static/Images/search.png" alt="" height="25" width="25">
                        <input type="text" id="searchInput" placeholder="search your car model"/> <br/>
                        
                    </div>
                </div>
                
                
                <br>
               
                
                
                <div class="car-model row">
                    
                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Tata\ Nexon\ EV.webp);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Tata Nexon EV" >
                        <div class="car-img">
                            <h4>Tata Nexon EV</h4>
                        </div>
                        
                    </label>

                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/MG\ ZS\ EV.webp);background-size: cover;">
                        <input type="radio" name="car-model-name" value="MG ZS EV">
                        <div class="car-img">
                            <h4>MG ZS EV</h4>
                        </div>
                        
                    </label>

                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Hyundai\ Kona\ Electric.webp);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Hyundai Kona Electric" >
                        <div class="car-img">
                            <h4>Hyundai Kona Electric</h4>
                        </div>
                        
                    </label>

                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Tata\ Tigor\ EV.webp);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Tata Tigor EV" >
                        <div class="car-img">
                            <h4>Tata Tigor EV</h4>
                        </div>
                        
                    </label>

                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Mahindra\ e-Verito.jpg);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Mahindra e-Verito" >
                        <div class="car-img">
                            <h4>Mahindra e-Verito</h4>
                        </div>
                        
                    </label>
                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Mahindra\ e2o\ Plus.webp);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Mahindra e2o Plus" >
                        <div class="car-img">
                            <h4>Mahindra e2o Plus</h4>
                        </div>
                        
                    </label>

                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Hyundai\ Ioniq\ Electric.jpg);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Hyundai Ioniq Electric" >
                        <div class="car-img">
                            <h4>Hyundai Ioniq Electric</h4>
                        </div>
                        
                    </label>

                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Jaguar\ I-Pace.webp);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Jaguar I-Pace" >
                        <div class="car-img">
                            <h4>Jaguar I-Pace</h4>
                        </div>
                        
                    </label>

                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Mercedes-Benz\ EQC.jpg);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Mercedes-Benz EQC">
                        <div class="car-img">
                            <h4>Mercedes-Benz EQC</h4>
                        </div>
                        
                    </label>

                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Audie-tron.jpg);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Audi e-tron" >
                        <div class="car-img">
                            <h4>Audi e-tron</h4>
                        </div>
                        
                    </label>

                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Porsche\ Taycan.jpeg);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Porsche Taycan" >
                        <div class="car-img">
                            <h4>Porsche Taycan</h4>
                        </div>
                        
                    </label>
                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/BMW\ i3.jpg);background-size: cover;">
                        <input type="radio" name="car-model-name" value="BMW i3">
                        <div class="car-img">
                            <h4>BMW i3</h4>
                        </div>
                        
                    </label>

                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Volvo\ XC40\ Recharge.webp);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Volvo XC40 Recharge" >
                        <div class="car-img">
                            <h4>Volvo XC40 Recharge</h4>
                        </div>
                        
                    </label>
                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Kia\ EV6.jpg);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Kia EV6" >
                        <div class="car-img">
                            <h4>Kia EV6</h4>
                        </div>
                        
                    </label>

                    <label class="img-btn col-sm-4 col-md-3" style="background: url(/static/Images/cars/Hyundai\ Ioniq\ 5.jpg);background-size: cover;">
                        <input type="radio" name="car-model-name" value="Hyundai Ioniq 5">
                        <div class="car-img">
                            <h4>Hyundai Ioniq 5</h4>
                        </div>
                        
                    </label>

                    
                </div>
              </div>
              <div class="carousel-item">
                <h3 style="text-align: center;">Choose connector type (2 / 3)</h3>
                <br><br>
                <div  class="car-model row">
                    
                    <label class="img-btn col-5" >
                        <input type="radio" name="connector" value="CCS" >
                        <img src="/static/Images/cars/ccs.webp" alt="" height="200px" width="100%">
                        <h4>CCS</h4>
                        
                    </label>

                    <label class="img-btn col-5" >
                        <input type="radio" name="connector" value="CHAdeMO" >
                        <img src="/static/Images/cars/chademo.jpg" alt="" height="200px" width="100%">
                        <h4>CHAdeMO</h4>
                    </label>
                </div>
              </div>
              <div class="carousel-item">
                <h3 style="text-align: center;">Choose your available slot (3 / 3)</h3>
                <br>
                <div>
                    
                </div>
                
                <div class="slots">
                    <label class=" col-sm-5 mt-5 mb-3" >
                        Vehicle Number : 
                        <input type="text" name="vehicle-number" placeholder="AX 12 BX 1234" >
                    </label>
                    
                    <div class="slot-filter" id = "slot-filter">
                        <button type="button" id="all" class="btn btn-dark">all</button>
                        <button type="button" id="today" class="btn btn-dark">today</button>
                        <button type="button" id="tomorrow" class="btn btn-dark">tomorrow</button>
                    </div>
                     
                    <label class="slot-ind col-sm-5" >
                        <input type="radio" name="slot" value="Today , 8:00 AM  9:00 AM">
                        <p>Today , 8:00 AM  9:00 AM</p>
                    </label>
                    <label class="slot-ind col-sm-5" value="Today , 8:00 AM  9:00 AM">
                        <input type="radio" name="slot" >
                        <p>Today , 8:00 AM  9:00 AM</p>
                    </label>
                    <label class="slot-ind col-sm-5" value="Tomorrow , 8:00 AM  9:00 AM">
                        <input type="radio" name="slot" >
                        <p>Tomorrow , 8:00 AM  9:00 AM</p>
                    </label>
                    <label class="slot-ind col-sm-5" value="Tomorrow , 8:00 AM  9:00 AM">
                        <input type="radio" name="slot" >
                        <p>Tomorrow , 8:00 AM  9:00 AM</p>
                    </label>
                </div>
              </div>
            </div>
            
        </div>
        <div class="buttons">
            <button  type="button" class="btn btn-dark" data-bs-target="#carouselExample" data-bs-slide="prev">
                Previous
            </button>
            <button  type="button" class="btn btn-light" data-bs-target="#carouselExample" data-bs-slide="next">
                Next
            </button>
            <button type="submit" id="sb-btn" class="btn btn-success">BOOK</button>
        </div>
        
    </form>
    <script>
        var map = L.map('map').setView(<%= JSON.stringify(data.latLon) %>, 10);
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);
        L.marker(<%= JSON.stringify(data.latLon) %>).addTo(map)
        .bindPopup(`<h5><%= data.name %></h5><a target='_blank' href='https://maps.google.com/?q=${<%=JSON.stringify(data.latLon[0])%>},${<%=JSON.stringify(data.latLon[1])%>}'>Open in map</a>`)
        .on('mouseover', function (e) {
                    this.openPopup();
                })
        .on('mouseout', function (e) {
                    // this.closePopup();
                });
    </script>
    <script>
        


        document.getElementById('searchInput').addEventListener('input', function() {
            var searchQuery = this.value.toLowerCase();
            var items = document.querySelectorAll('.car-model > .img-btn');

            items.forEach(function(item) {
                var itemText = item.textContent.toLowerCase();
                if (itemText.includes(searchQuery)) {
                item.style.display = 'block';
                } else {
                item.style.display = 'none';
                }
            });
            });
        document.getElementById('all').addEventListener('click', function() {
            var searchQuery = this.value.toLowerCase();
            var items = document.querySelectorAll('.slot-ind');

            items.forEach(function(item) {
                var itemText = item.textContent.toLowerCase();
                if (itemText.includes("")) {
                item.style.display = 'flex';
                } else {
                item.style.display = 'none';
                }
            });
            });
        document.getElementById('today').addEventListener('click', function() {
            var searchQuery = this.value.toLowerCase();
            var items = document.querySelectorAll('.slot-ind');

            items.forEach(function(item) {
                var itemText = item.textContent.toLowerCase();
                if (itemText.includes("today")) {
                item.style.display = 'flex';
                } else {
                item.style.display = 'none';
                }
            });
            });
        document.getElementById('tomorrow').addEventListener('click', function() {
            var searchQuery = this.value.toLowerCase();
            var items = document.querySelectorAll('.slot-ind');

            items.forEach(function(item) {
                var itemText = item.textContent.toLowerCase();
                if (itemText.includes("tomorrow")) {
                item.style.display = 'flex';
                } else {
                item.style.display = 'none';
                }
            });
            });
            document.getElementById('myForm').addEventListener('submit', function(event) {
                info = document.getElementById("info");
                console.log("hi")
                carmodel = document.querySelector('input[name="car-model-name"]:checked');
                connector = document.querySelector('input[name="connector"]:checked');
                slot = document.querySelector('input[name="slot"]:checked');
                vehicleNumber = document.querySelector('input[name="vehicle-number"]').value.trim();
                if(carmodel && connector && slot && vehicleNumber != ""){
                    info.innerHTML =  "Booking your slot...";
                    info.style.opacity = 1;
                    info.classList.add("g");
                    event.preventDefault()
                    setTimeout(()=>{
                        info.style.opacity = 0;
                        info.classList.remove("g");
                        this.submit();
                },3000)
                    
                }
                else{
                    event.preventDefault();
                    info.innerHTML =  "Please fill all the details...";
                    info.style.opacity = 1;
                    info.classList.add("r");
                    setTimeout(()=>{
                        info.style.opacity = 0;
                        info.classList.remove("r");
                },3000)
                }

                
                
                
            
                
                });
    </script>
</body>
</html>